<% select_related_associations = queryset.select_related_associations %>

<% select_related_associations.each_with_index do |select_related_association, association_index| %>

  <% last_one = association_index == select_related_association.length - 1 %>

  <% target_alias = select_related_association.target_alias %>
  <% target_model = select_related_association.target_model %>
  <% target_model.class.columns.each do |target_field| %>
    <%= target_alias %>.<%= target_field %>
    AS
    <%= target_alias %>__<%= target_field %>
  <% end %>
  <% unless last_one %>,<% end %>
<% end %>